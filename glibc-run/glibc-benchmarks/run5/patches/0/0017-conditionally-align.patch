From ed3b889f0e39ef196e02da488160465b10687ac9 Mon Sep 17 00:00:00 2001
From: Noah Goldstein <goldstein.w.n@gmail.com>
Date: Mon, 23 Aug 2021 17:26:41 -0400
Subject: [PATCH 17/20] conditionally align

---
 sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S b/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
index be0d31117c..bc87f5c603 100644
--- a/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
+++ b/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
@@ -558,7 +558,7 @@ L(more_8x_vec_check):
 	/* Load the first VEC and last 4 * VEC to support overlapping addresses.
 	 */
 	VMOVU	(%rsi), %VEC(4)
-L(more_8x_vec_forward):    
+L(more_8x_vec_forward):
 	VMOVU	-VEC_SIZE(%rsi, %rdx), %VEC(5)
 	VMOVU	-(VEC_SIZE * 2)(%rsi, %rdx), %VEC(6)
 	VMOVU	-(VEC_SIZE * 3)(%rsi, %rdx), %VEC(7)
@@ -595,6 +595,7 @@ L(loop_4x_vec_forward):
 	VMOVU	%VEC(4), (%rcx)
 L(nop2):
 	VZEROUPPER_RETURN
+	.p2align 4,, 2
 L(more_8x_vec_backward_check_nop):
 	testq	%rcx, %rcx
 	jz	L(nop2)
-- 
2.25.1

