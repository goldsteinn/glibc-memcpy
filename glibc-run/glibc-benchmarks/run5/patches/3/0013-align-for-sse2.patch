From da3619b90f7df8012e02bc62286df89298894fe0 Mon Sep 17 00:00:00 2001
From: Noah Goldstein <goldstein.w.n@gmail.com>
Date: Mon, 23 Aug 2021 00:31:07 -0400
Subject: [PATCH 13/18] align for sse2

---
 sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S b/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
index 81c369c77d..cd5d00eac9 100644
--- a/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
+++ b/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
@@ -488,6 +488,9 @@ L(skip_short_movsb_check):
 
 
 #if defined USE_MULTIARCH && IS_IN (libc)
+# if VEC_SIZE == 16
+	.p2align 4
+# endif
 L(movsb_more_2x_vec):
 	cmp	__x86_rep_movsb_threshold(%rip), %RDX_LP
 	ja	L(movsb)
@@ -530,6 +533,7 @@ L(last_4x_vec):
 	VMOVU	%VEC(3), -(VEC_SIZE * 2)(%rdi, %rdx)
 L(nop):
 	VZEROUPPER_RETURN
+
 	.p2align 4,, 10
 L(more_8x_vec):
 	/* Check if non-temporal move candidate.  */
-- 
2.25.1

